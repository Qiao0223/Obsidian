Quartz 是一个功能强大的开源任务调度框架，完全由 Java 编写，广泛应用于企业级 Java 应用程序中，用于实现定时任务的调度和执行。

# 1. 核心概念

- **Job（任务）**  
    表示具体要执行的任务逻辑。每个 Job 需要实现 `org.quartz.Job` 接口，并重写 `execute(JobExecutionContext context)` 方法。
    
- **Trigger（触发器）**  
    定义任务的执行时机。Quartz 支持多种类型的触发器：
    - **SimpleTrigger**：用于简单的定时任务，如每隔固定时间执行一次。
    - **CronTrigger**：支持使用 Cron 表达式定义复杂的调度计划，如每周一上午10点执行。
    - **CalendarIntervalTrigger**：按日历间隔触发，如每月的最后一个工作日执行。
    
- **Scheduler（调度器）**  
    Quartz 的核心组件，负责管理和协调 Job 与 Trigger 的关系，并控制任务的调度和执行。
    
- **JobDetail**  
    用于描述 Job 的详细信息，包括 Job 的名称、分组、描述等。
    
- **JobStore（任务存储）**  
    定义任务的存储方式：
    - **RAMJobStore**：将任务存储在内存中，适用于对任务持久性要求不高的场景。
    - **JDBCJobStore**：将任务存储在数据库中，支持任务的持久化，适用于需要任务持久化和集群部署的场景。[mikechen](https://mikechen.cc/4499.html?utm_source=chatgpt.com)
    
- **Listener（监听器）**  
    用于监听任务的执行过程，Quartz 提供了 JobListener、TriggerListener 和 SchedulerListener 三种监听器，方便在任务执行前后进行日志记录、通知等操作。

# 2. 主要特性

- **灵活的调度方式**：支持多种触发器类型，满足各种复杂的调度需求。
- **任务持久化**：支持将任务信息持久化到数据库中，防止任务丢失。
- **集群支持**：支持集群部署，提供高可用性和负载均衡能力。
- **事务支持**：可以与 JTA 事务管理器集成，保证任务执行的一致性。
- **监听器机制**：提供丰富的监听器接口，方便对任务执行过程进行监控和扩展。

# 3. 应用场景

- **定时发送通知或邮件**：如每天早上8点发送提醒邮件。
- **定期生成报表**：如每周一生成上周的销售报表。
- **自动化数据备份**：如每天凌晨备份数据库。
- **系统维护任务**：如定期清理日志文件。
- **工作流控制**：如在订单创建后，定时检查订单状态并发送提醒。

# 4. Spring 与 Quartz 区别
|特性|Spring `@Scheduled`|Quartz Scheduler|
|---|---|---|
|**复杂度**|简单，开箱即用|功能强大，配置复杂|
|**任务持久化**|不支持，任务信息存储在内存中|支持，任务信息可存储在数据库中|
|**集群支持**|不支持，无法在多节点环境中协调任务执行|支持，适用于分布式和高可用场景|
|**事务管理**|不支持|支持 JTA 事务管理|
|**调度灵活性**|支持固定速率、固定延迟和 Cron 表达式|支持多种触发器类型，包括复杂的 Cron 表达式|
|**任务管理**|不支持任务的暂停、恢复和删除等操作|支持丰富的任务管理功能|
|**监听器机制**|不支持|提供 JobListener、TriggerListener 等监听器机制|
|**适用场景**|简单的定时任务，如定时发送邮件、清理缓存等|复杂的任务调度，如工作流控制、任务依赖管理等|
- **选择 Spring `@Scheduled`：**
    
    - 任务简单，执行频率固定，且对任务持久化和集群支持无需求。
    - 希望快速实现定时任务，减少配置和开发成本。
    
- **选择 Quartz Scheduler：**
    
    - 需要任务持久化，防止任务丢失。
    - 应用部署在多节点环境中，需要协调任务执行。
    - 任务调度逻辑复杂，需支持多种触发器类型和任务管理功能。
    - 需要监听任务执行过程，进行日志记录、通知等操作。