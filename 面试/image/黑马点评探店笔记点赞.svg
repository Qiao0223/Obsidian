<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1098px" preserveAspectRatio="none" style="width:852px;height:1098px;background:#FFFFFF;" version="1.1" viewBox="0 0 852 1098" width="852px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="176.8975" style="stroke:#000000;stroke-width:1.5;" width="237" x="289" y="11"/><path d="M327,11 L327,23.1201 L317,33.1201 L289,33.1201 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="292" y="28.0439">&#29992;&#25143;</text><ellipse cx="407.5" cy="53.1201" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.3887" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="127" x="344" y="83.1201"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="107" x="354" y="106.8721">&#28857;&#20987;&#8220;&#28857;&#36190;/&#21462;&#28040;&#8221;&#25353;&#38062;</text><rect fill="#F1F1F1" height="36.3887" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="217" x="299" y="139.5088"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="197" x="309" y="163.2607">POST /blog/like/{blogId} (&#21253;&#21547; token)</text><rect fill="none" height="377.4919" style="stroke:#000000;stroke-width:1.5;" width="203" x="312" y="197.8975"/><path d="M364,197.8975 L364,210.0176 L354,220.0176 L312,220.0176 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="315" y="214.9414">&#25318;&#25130;&#22120;</text><rect fill="#F1F1F1" height="36.3887" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="77" x="369" y="237.0176"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="57" x="379" y="260.7695">&#25552;&#21462; token</text><rect fill="#F1F1F1" height="36.3887" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="151" x="332" y="342.9177"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="131" x="342" y="366.6697">&#36820;&#22238; &#8220;&#26410;&#30331;&#24405;&#65292;&#35831;&#20808;&#30331;&#24405;&#8221;</text><ellipse cx="407.5" cy="417.6121" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;"/><ellipse cx="407.5" cy="417.6121" fill="#222222" rx="6" ry="6" style="stroke:#222222;stroke-width:1.0;"/><polygon fill="#F1F1F1" points="379,293.4063,436,293.4063,448,305.4063,436,317.4063,379,317.4063,367,305.4063,379,293.4063" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="411.5" y="330.0122">&#26159;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="57" x="379" y="310.5007">token &#20026;&#31354;?</text><rect fill="#F1F1F1" height="36.3887" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="142" x="336.5" y="470.6121"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="122" x="346.5" y="494.364">&#35299;&#26512; token &#33719;&#21462; userId</text><rect fill="#F1F1F1" height="36.3887" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="169" x="323" y="527.0007"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="149" x="333" y="550.7527">&#23558; userId &#23384;&#20837; ThreadLocal</text><rect fill="none" height="501.8408" style="stroke:#000000;stroke-width:1.5;" width="830" x="11" y="585.3894"/><path d="M49,585.3894 L49,597.5095 L39,607.5095 L11,607.5095 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="14" y="602.4333">&#26381;&#21153;</text><rect fill="#F1F1F1" height="36.3887" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="169" x="323" y="624.5095"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="149" x="333" y="648.2615">&#20174; ThreadLocal &#33719;&#21462; userId</text><rect fill="#F1F1F1" height="36.3887" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="181" x="317" y="680.8982"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="161" x="327" y="704.6501">setKey = "blog:liked:" + blogId</text><rect fill="#F1F1F1" height="36.3887" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="199" x="308" y="737.2869"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="179" x="318" y="761.0388">rankingKey = "blog:liked:ranking"</text><polygon fill="#F1F1F1" points="333,793.6755,482,793.6755,494,805.6755,482,817.6755,333,817.6755,321,805.6755,333,793.6755" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="149" x="333" y="810.77">Set.isMember(setKey, userId)?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="310" y="803.2585">&#21542;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="11" x="494" y="803.2585">&#26159;</text><rect fill="#F1F1F1" height="36.3887" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="356" x="23" y="827.6755"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="336" x="33" y="851.4275">&#25968;&#25454;&#24211; UPDATE blog SET liked = liked + 1 WHERE id = blogId</text><rect fill="#F1F1F1" height="36.3887" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="184" x="109" y="884.0642"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="164" x="119" y="907.8162">Redis Set.add(setKey, userId)</text><rect fill="#F1F1F1" height="36.3887" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="293" x="54.5" y="940.4529"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="273" x="64.5" y="964.2048">Redis ZSet.incrementScore(rankingKey, blogId, 1)</text><rect fill="#F1F1F1" height="36.3887" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="103" x="149.5" y="996.8416"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="83" x="159.5" y="1020.5935">&#36820;&#22238; &#8220;&#28857;&#36190;&#25104;&#21151;&#8221;</text><ellipse cx="201" cy="1064.2302" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;"/><ellipse cx="201" cy="1064.2302" fill="#222222" rx="6" ry="6" style="stroke:#222222;stroke-width:1.0;"/><rect fill="#F1F1F1" height="36.3887" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="430" x="399" y="827.6755"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="410" x="409" y="851.4275">&#25968;&#25454;&#24211; UPDATE blog SET liked = liked - 1 WHERE id = blogId AND liked &gt; 0</text><rect fill="#F1F1F1" height="36.3887" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="204" x="512" y="884.0642"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="184" x="522" y="907.8162">Redis Set.remove(setKey, userId)</text><rect fill="#F1F1F1" height="36.3887" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="297" x="465.5" y="940.4529"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="277" x="475.5" y="964.2048">Redis ZSet.incrementScore(rankingKey, blogId, -1)</text><rect fill="#F1F1F1" height="36.3887" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="115" x="556.5" y="996.8416"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="95" x="566.5" y="1020.5935">&#36820;&#22238; &#8220;&#24050;&#21462;&#28040;&#28857;&#36190;&#8221;</text><ellipse cx="614" cy="1064.2302" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;"/><ellipse cx="614" cy="1064.2302" fill="#222222" rx="6" ry="6" style="stroke:#222222;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="407.5" x2="407.5" y1="63.1201" y2="83.1201"/><polygon fill="#181818" points="403.5,73.1201,407.5,83.1201,411.5,73.1201,407.5,77.1201" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="407.5" x2="407.5" y1="119.5088" y2="139.5088"/><polygon fill="#181818" points="403.5,129.5088,407.5,139.5088,411.5,129.5088,407.5,133.5088" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="407.5" x2="407.5" y1="379.3064" y2="406.6121"/><polygon fill="#181818" points="403.5,396.6121,407.5,406.6121,411.5,396.6121,407.5,400.6121" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="407.5" x2="407.5" y1="317.4063" y2="342.9177"/><polygon fill="#181818" points="403.5,332.9177,407.5,342.9177,411.5,332.9177,407.5,336.9177" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="448" x2="493" y1="305.4063" y2="305.4063"/><polygon fill="#181818" points="489,376.6121,493,386.6121,497,376.6121,493,380.6121" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="493" x2="493" y1="305.4063" y2="450.6121"/><line style="stroke:#181818;stroke-width:1.0;" x1="493" x2="407.5" y1="450.6121" y2="450.6121"/><line style="stroke:#181818;stroke-width:1.0;" x1="407.5" x2="407.5" y1="450.6121" y2="470.6121"/><polygon fill="#181818" points="403.5,460.6121,407.5,470.6121,411.5,460.6121,407.5,464.6121" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="407.5" x2="407.5" y1="273.4063" y2="293.4063"/><polygon fill="#181818" points="403.5,283.4063,407.5,293.4063,411.5,283.4063,407.5,287.4063" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="407.5" x2="407.5" y1="507.0007" y2="527.0007"/><polygon fill="#181818" points="403.5,517.0007,407.5,527.0007,411.5,517.0007,407.5,521.0007" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="407.5" x2="407.5" y1="175.8975" y2="237.0176"/><polygon fill="#181818" points="403.5,227.0176,407.5,237.0176,411.5,227.0176,407.5,231.0176" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="407.5" x2="407.5" y1="660.8982" y2="680.8982"/><polygon fill="#181818" points="403.5,670.8982,407.5,680.8982,411.5,670.8982,407.5,674.8982" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="407.5" x2="407.5" y1="717.2869" y2="737.2869"/><polygon fill="#181818" points="403.5,727.2869,407.5,737.2869,411.5,727.2869,407.5,731.2869" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="201" x2="201" y1="864.0642" y2="884.0642"/><polygon fill="#181818" points="197,874.0642,201,884.0642,205,874.0642,201,878.0642" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="201" x2="201" y1="920.4529" y2="940.4529"/><polygon fill="#181818" points="197,930.4529,201,940.4529,205,930.4529,201,934.4529" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="201" x2="201" y1="976.8416" y2="996.8416"/><polygon fill="#181818" points="197,986.8416,201,996.8416,205,986.8416,201,990.8416" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="201" x2="201" y1="1033.2302" y2="1053.2302"/><polygon fill="#181818" points="197,1043.2302,201,1053.2302,205,1043.2302,201,1047.2302" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="614" x2="614" y1="864.0642" y2="884.0642"/><polygon fill="#181818" points="610,874.0642,614,884.0642,618,874.0642,614,878.0642" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="614" x2="614" y1="920.4529" y2="940.4529"/><polygon fill="#181818" points="610,930.4529,614,940.4529,618,930.4529,614,934.4529" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="614" x2="614" y1="976.8416" y2="996.8416"/><polygon fill="#181818" points="610,986.8416,614,996.8416,618,986.8416,614,990.8416" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="614" x2="614" y1="1033.2302" y2="1053.2302"/><polygon fill="#181818" points="610,1043.2302,614,1053.2302,618,1043.2302,614,1047.2302" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="321" x2="201" y1="805.6755" y2="805.6755"/><line style="stroke:#181818;stroke-width:1.0;" x1="201" x2="201" y1="805.6755" y2="827.6755"/><polygon fill="#181818" points="197,817.6755,201,827.6755,205,817.6755,201,821.6755" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="494" x2="614" y1="805.6755" y2="805.6755"/><line style="stroke:#181818;stroke-width:1.0;" x1="614" x2="614" y1="805.6755" y2="827.6755"/><polygon fill="#181818" points="610,817.6755,614,827.6755,618,817.6755,614,821.6755" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="407.5" x2="407.5" y1="773.6755" y2="793.6755"/><polygon fill="#181818" points="403.5,783.6755,407.5,793.6755,411.5,783.6755,407.5,787.6755" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="407.5" x2="407.5" y1="563.3894" y2="624.5095"/><polygon fill="#181818" points="403.5,614.5095,407.5,624.5095,411.5,614.5095,407.5,618.5095" style="stroke:#181818;stroke-width:1.0;"/><!--SRC=[hLDTInj157tVNt79qmPZewy9AeA1YjMAIH5yMxEZ3ecxONSg50b88UtMHbtyGZ5DAQAr5ZyGsjIafVz5dCdwv5_exCoQX1Yb3-xBphrpvfvxpjp9QHR119i6r3UFc5E1HGNuPnEU5wjO_UqbVL-xMYhnXVUZ7ALhs-odSxNqYHK_tAoVnYLg_6Ko1T7fh3aRpU8CYYxwos4z3oej5gZx7OYPGKOuhkGL9TVWP1yFcNDCTuy2sXXRStbz2PQLyGoe8eJhNzNwj-f06CWSZrIsSnOM277G-xj9zyh0ssIbu_fkZVxPklrTzCugjE38a7SSR-1jOkP4W0mTpqXkx-i-AxkI6xpLYj_8QnjPmtgWaPw_2n90JtPeuG1ISnRIz1TcMiksAokjqEKlTxAkQwkjs8xLRKH6q1leWv1lNSntKO-5e0kaam7AqemCDcRl8uEDKDEr92BFi3sAvgUHfShgaO0ot72HkeSjBhAjSxPoIgiRy6fyQ32L4DoGJAH0a71A-U-2NfXydfX80FQJhHsAEXD8npRu3MYwtivz3pSbEZNI5ff71accJGkfJPsHe7m4UbkFDYzSpYLpNBhy-O5BpjgeVM3-Lsft9wamE3OKxFT3JqVXN8ovW9vCU_S3ucdbGZv8wS9ZGvvN_W40]--></g></svg>