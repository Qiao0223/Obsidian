# 1. 简单动态字符串
## 1.1. SDS 的结构定义
```
struct sdshdr {
    int len;    // buf 中已使用的字节数，即字符串长度
    int free;   // buf 中未使用的字节数
    char buf[]; // 字节数组，用于存储字符串数据
};
```
## 1.2. SDS 的优点

- **常数时间获取字符串长度**：由于 SDS 结构中维护了 len 字段，获取字符串长度的操作时间复杂度为 O(1)，避免了 C 字符串中需要遍历整个字符串的问题。
- **防止缓冲区溢出**：SDS 在执行修改操作前，会检查并自动扩展内存，避免了 C 字符串中常见的缓冲区溢出问题。
- **减少内存重分配次数**：SDS 采用空间预分配和惰性空间释放策略，减少了频繁的内存分配和释放操作，提高了性能。
- **二进制安全**：SDS 不依赖于空字符 `\0` 来标识字符串结束，因此可以安全地存储任意二进制数据。
- **兼容部分 C 字符串函数**：SDS 的 buf 末尾仍保留了一个 `\0` 字符，使其在需要时可以与 C 的字符串函数兼容。

## 1.3. SDS 与 C 字符串的对比
|特性|C 字符串|SDS|
|---|---|---|
|长度获取|O(N)，需遍历|O(1)，直接读取 len 字段|
|缓冲区溢出风险|高|低，自动扩展内存|
|内存重分配频率|高|低，采用预分配和惰性释放策略|
|二进制安全|否|是|
|与 C 函数兼容性|完全兼容|兼容部分函数|
# 2. 链表
## 2.1. 链表结构
### 1. 链表节点（listNode）
每个节点包含：
- `prev`：指向前一个节点的指针
- `next`：指向后一个节点的指针
- `value`：指向节点存储的数据的指针

这使得链表可以在两个方向上进行遍历。
### 2. 链表结构体（list）

整个链表结构体包含：
- `head`：指向链表头节点的指针
- `tail`：指向链表尾节点的指针
- `len`：链表中节点的数量
- 函数指针：用于定义节点值的复制、释放和匹配操作

## 2.2. 特性

- **双向性**：每个节点都包含前后指针，支持从任意节点向前或向后遍历。
- **无环性**：链表的头节点的 `prev` 和尾节点的 `next` 都指向 `NULL`，表示链表的开始和结束。
- **带头尾指针**：链表结构体中包含指向头尾节点的指针，便于在 O(1) 时间内访问链表的两端。
- **长度计数器**：链表结构体中维护了一个计数器，记录链表中节点的数量，获取长度的操作时间复杂度为 O(1)。
- **多态性**：通过函数指针，链表可以存储和操作多种类型的数据。